import"./modulepreload-polyfill-B5Qt9EMX.js";const r=document.getElementById("panel"),u=document.getElementById("content"),o=document.getElementById("viewer"),a=document.getElementById("filterInput"),x=document.getElementById("clearSearchButton"),B=document.getElementById("expandButton"),f=document.getElementById("button"),$=document.getElementById("panelScrim"),g=document.getElementById("previewsToggler"),h=document.querySelector("#sections > a"),I=h.href,d={},p=new Map,y=document.createElement("div");let m=null;S();async function S(){u.appendChild(y),f.style.display="none",u.classList.add("minimal"),g.style.opacity=u.classList.contains("minimal")?"1":"0.25";const e=await(await fetch("./files.json")).json(),n=await(await fetch("./tags.json")).json();for(const t in e){const c=e[t],i=document.createElement("h2");i.textContent=t,i.setAttribute("data-category",t),y.appendChild(i);for(let l=0;l<c.length;l++){const s=c[l];if(s){p.set(s,`src/${s}/index.html`);const v=b(s,n[s]);y.appendChild(v),d[s]=v}}}if(window.location.hash!==""){const t=window.location.hash.substring(1);p.has(t)===!0&&(L(t),o.src=p.get(t),o.style.display="unset")}o.src===""&&(o.srcdoc=document.getElementById("PlaceholderHTML").innerHTML,o.style.display="unset"),a.value=H(),a.value!==""?(r.classList.add("searchFocused"),w(e,n)):E(""),a.onfocus=function(){r.classList.add("searchFocused")},a.onblur=function(){a.value===""&&r.classList.remove("searchFocused")},x.onclick=function(){a.value="",w(e,n),a.focus()},a.addEventListener("input",function(){w(e,n)}),B.addEventListener("click",function(t){t.preventDefault(),r.classList.toggle("open")}),$.onclick=function(t){t.preventDefault(),r.classList.toggle("open")},g.onclick=function(t){t.preventDefault(),u.classList.toggle("minimal"),g.style.opacity=u.classList.contains("minimal")?"1":"0.25"},/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.style.width=getComputedStyle(o).width,o.style.height=getComputedStyle(o).height,o.setAttribute("scrolling","no"))}function b(e,n){const t=Array.isArray(n)&&n.includes("external")?' <span class="tag">external</span>':"",c=`
				<div class="card">
					<a href="${p.get(e)}" target="viewer">
						<div class="cover">
							<img src="screenshots/${e}.png" loading="lazy" width="400" />
						</div>
						<div class="title">${k(e)}${t}</div>
					</a>
				</div>
			`,i=T(c);return i.querySelector('a[target="viewer"]').addEventListener("click",function(s){s.button!==0||s.ctrlKey||s.altKey||s.metaKey||L(e)}),i}function L(e){m!==null&&d[m].classList.remove("selected"),d[e].classList.add("selected"),window.location.hash=e,o.focus(),o.style.display="unset",r.classList.remove("open"),m=e,f.style.display="",f.href=`https://github.com/feng3d-labs/tsl/tree/master/examples/src/${m}/index.ts`,f.title=`View source code for ${k(m)} on GitHub`}function C(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(e,n){let t=a.value.trim();t=t.replace(/\s+/gi," "),t!==""?window.history.replaceState({},"",`?q=${t}${window.location.hash}`):window.history.replaceState({},"",window.location.pathname+window.location.hash);const c=new RegExp(C(t),"gi");for(const i in e){const l=e[i];for(let s=0;s<l.length;s++)q(l[s],c,n)}F(e),E(t)}function E(e){if(e){const n=h.href.split(/[?#]/)[0];h.href=`${n}?q=${e}`}else h.href=I}function q(e,n,t){const c=d[e];if(!c)return;e in t&&(e+=` ${t[e].join(" ")}`);const i=e.replace(/_+/g," ").match(n);i&&i.length>0?c.classList.remove("hidden"):c.classList.add("hidden")}function k(e){return e.split("/").pop()}function F(e){for(const n in e){let t=!0;const c=e[n];for(let l=0;l<c.length;l++){const s=c[l];if(d[s]&&d[s].classList.contains("hidden")===!1){t=!1;break}}const i=document.querySelector(`h2[data-category="${n}"]`);t?i.classList.add("hidden"):i.classList.remove("hidden")}}function H(){const e=window.location.search;return e.indexOf("?q=")!==-1?decodeURI(e.slice(3)):""}function T(e){const n=document.createElement("div");return n.innerHTML=e.trim(),n.firstChild}
