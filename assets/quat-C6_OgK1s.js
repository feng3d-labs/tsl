import{A as h,E as P}from"./common-C8IKy_GC.js";import{c as R,f as q,d as V,e as w,l as g,n as o}from"./vec3-BLfYq55O.js";function I(){var r=new h(9);return h!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function T(){var r=new h(4);return h!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function U(r,n,f,e,a){return r[0]=n,r[1]=f,r[2]=e,r[3]=a,r}function Y(r,n){var f=n[0],e=n[1],a=n[2],s=n[3],c=f*f+e*e+a*a+s*s;return c>0&&(c=1/Math.sqrt(c)),r[0]=f*c,r[1]=e*c,r[2]=a*c,r[3]=s*c,r}(function(){var r=T();return function(n,f,e,a,s,c){var v,i;for(f||(f=4),e||(e=0),a?i=Math.min(a*f+e,n.length):i=n.length,v=e;v<i;v+=f)r[0]=n[v],r[1]=n[v+1],r[2]=n[v+2],r[3]=n[v+3],s(r,r,c),n[v]=r[0],n[v+1]=r[1],n[v+2]=r[2],n[v+3]=r[3];return n}})();function E(){var r=new h(4);return h!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function L(r,n,f){f=f*.5;var e=Math.sin(f);return r[0]=e*n[0],r[1]=e*n[1],r[2]=e*n[2],r[3]=Math.cos(f),r}function x(r,n,f,e){var a=n[0],s=n[1],c=n[2],v=n[3],i=f[0],A=f[1],y=f[2],$=f[3],z,t,p,l,M;return t=a*i+s*A+c*y+v*$,t<0&&(t=-t,i=-i,A=-A,y=-y,$=-$),1-t>P?(z=Math.acos(t),p=Math.sin(z),l=Math.sin((1-e)*z)/p,M=Math.sin(e*z)/p):(l=1-e,M=e),r[0]=l*a+M*i,r[1]=l*s+M*A,r[2]=l*c+M*y,r[3]=l*v+M*$,r}function N(r,n){var f=n[0]+n[4]+n[8],e;if(f>0)e=Math.sqrt(f+1),r[3]=.5*e,e=.5/e,r[0]=(n[5]-n[7])*e,r[1]=(n[6]-n[2])*e,r[2]=(n[1]-n[3])*e;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[a*3+a]&&(a=2);var s=(a+1)%3,c=(a+2)%3;e=Math.sqrt(n[a*3+a]-n[s*3+s]-n[c*3+c]+1),r[a]=.5*e,e=.5/e,r[3]=(n[s*3+c]-n[c*3+s])*e,r[s]=(n[s*3+a]+n[a*3+s])*e,r[c]=(n[c*3+a]+n[a*3+c])*e}return r}var _=U,F=Y;(function(){var r=R(),n=q(1,0,0),f=q(0,1,0);return function(e,a,s){var c=V(a,s);return c<-.999999?(w(r,n,a),g(r)<1e-6&&w(r,f,a),o(r,r),L(e,r,Math.PI),e):c>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(w(r,a,s),e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=1+c,F(e,e))}})();(function(){var r=E(),n=E();return function(f,e,a,s,c,v){return x(r,e,c,v),x(n,a,s,v),x(f,r,n,2*v*(1-v)),f}})();(function(){var r=I();return function(n,f,e,a){return r[0]=e[0],r[3]=e[1],r[6]=e[2],r[1]=a[0],r[4]=a[1],r[7]=a[2],r[2]=-f[0],r[5]=-f[1],r[8]=-f[2],F(n,N(n,r))}})();export{E as c,_ as s};
