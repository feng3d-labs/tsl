import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{b as W,p as r,c as _,h as s,j as u,u as w,v as b,f as y,k as p,W as G}from"../../../builtins-C5GxhwDd.js";import{W as S,a as I}from"../../../frame-comparison-CBkPASci.js";import{s as C}from"../../../sampler2D-DSRZ_QT6.js";import{t as D}from"../../../texture-D0-A-o9X.js";import{r as v}from"../../../return-DhHkPme9.js";const c=W("main",()=>{r("highp","float"),r("highp","int"),v(_(s(2).multiply(s(u.mod(2))).subtract(1),s(2).multiply(s(u.divide(2))).subtract(1),0,1))}),E=C(w("diffuse")),h=w("u_imageSize",b()),f=y("main",()=>{r("highp","float"),r("highp","int"),v(D(E,b(p.x,h.y.subtract(p.y)).divide(h)))});function F(n,o){const t=new Image;return t.onload=function(){o(t)},t.src=n,t}document.addEventListener("DOMContentLoaded",async()=>{const n=c.toGLSL(2),o=f.toGLSL(2),t=c.toWGSL(),x=f.toWGSL(c),a=window.devicePixelRatio||1,i=document.getElementById("webgpu");i.width=i.clientWidth*a,i.height=i.clientHeight*a;const m=await new S({canvasId:"webgpu"}).init(),e=document.getElementById("webgl");e.width=e.clientWidth*a,e.height=e.clientHeight*a;const g=new G({canvasId:"webgl",webGLcontextId:"webgl2"});F("./images/Di-3d.png",l=>{const L={descriptor:{size:[l.width,l.height],format:"rgba8unorm"},sources:[{image:l,flipY:!1}]},d={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[{pipeline:{vertex:{glsl:n,wgsl:t},fragment:{glsl:o,wgsl:x,targets:[{blend:{}}]},primitive:{topology:"triangle-list"}},draw:{__type__:"DrawVertex",firstVertex:0,vertexCount:3},bindingResources:{diffuse:{texture:L,sampler:{minFilter:"linear",magFilter:"linear"}},u_imageSize:{value:[e.width/2,e.height/2]}}}]}]}]};m.submit(d),g.submit(d),I(g,m,e,i,0)})});
