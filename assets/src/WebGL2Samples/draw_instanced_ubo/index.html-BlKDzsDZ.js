import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as C,v as P,s as m,m as g,u as d,c as p,e as I,n as f,b as M,p as a,l as i,g as S,f as _,i as A,W as D}from"../../../builtins-C5GxhwDd.js";import{W as F,a as E}from"../../../frame-comparison-CBkPASci.js";import{m as V}from"../../../mat4-Pkjqt0vg.js";const O=C("pos",P(),0),R=m("Transform",{MVP:g(V(),2)}),T=d("transform",R),j=m("Material",{Diffuse:g(p(),2)}),B=d("material",j),u=I("instance",f(),{interpolation:"flat"}),s=M("main",()=>{a("highp","float"),a("highp","int"),u.assign(f(i)),S.assign(T.MVP.index(i).multiply(p(O,0,1)))}),c=_("main",()=>{a("highp","float"),a("highp","int"),A.assign(B.Diffuse.index(u.mod(2)))});function l(t){const e=window.devicePixelRatio||1;t.width=t.clientWidth*e,t.height=t.clientHeight*e}document.addEventListener("DOMContentLoaded",async()=>{const t=document.getElementById("webgpu");l(t);const e=await new F({canvasId:"webgpu"}).init(),n=document.getElementById("webgl");l(n);const r=new D({canvasId:"webgl",webGLcontextId:"webgl2"}),v=new Float32Array([-.3,-.5,.3,-.5,0,.5]),w={MVP:[new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-.5,0,0,1]),new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,.5,0,0,1])]},b={Diffuse:[[1,.5,0,1],[0,.5,1,1]]},h=s.toGLSL(2),x=c.toGLSL(2),y=s.toWGSL(),L=c.toWGSL(s),G={vertex:{glsl:h,wgsl:y},fragment:{glsl:x,wgsl:L,targets:[{blend:{}}]},primitive:{topology:"triangle-list"}},W={bindingResources:{Transform:{value:w},Material:{value:b}},vertices:{vertices:{pos:{data:v,format:"float32x2"}}}.vertices,draw:{__type__:"DrawVertex",vertexCount:3,instanceCount:2},pipeline:G},o={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[W]}]}]};e.submit(o),r.submit(o),E(r,e,n,t,0)});
