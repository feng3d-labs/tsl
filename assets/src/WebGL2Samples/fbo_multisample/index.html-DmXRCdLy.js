import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as p,v as a,u as m,b as G,p as e,g as S,c as d,f as W,e as $,W as k}from"../../../builtins-C5GxhwDd.js";import{W as q,a as J}from"../../../frame-comparison-CBkPASci.js";import{s as K}from"../../../sampler2D-DSRZ_QT6.js";import{t as Q}from"../../../texture-D0-A-o9X.js";import{r as M}from"../../../return-DhHkPme9.js";import{m as _}from"../../../mat4-Pkjqt0vg.js";import{c as V,s as X}from"../../../mat4-Lq7FX_53.js";import{c as ee,s as te}from"../../../vec3-BLfYq55O.js";import"../../../common-C8IKy_GC.js";const se=p("position",a(),0),re=m("MVP",_()),l=G("main",()=>{e("highp","float"),e("highp","int"),S.assign(re.multiply(d(se,0,1)))}),L=W("main",()=>{e("highp","float"),e("highp","int"),M(d(1,.5,0,1))}),oe=p("position",a(),0),ne=p("texcoord",a(),1),ae=m("MVP",_()),C=$("uv",a()),c=G("main",()=>{e("highp","float"),e("highp","int"),C.assign(ne),S.assign(ae.multiply(d(oe,0,1)))}),ie=K(m("diffuse")),y=W("main",()=>{e("highp","float"),e("highp","int"),M(Q(ie,C))});function F(t){const s=window.devicePixelRatio||1;t.width=t.clientWidth*s,t.height=t.clientHeight*s}document.addEventListener("DOMContentLoaded",async()=>{const t=document.getElementById("webgpu");F(t);const s=await new q({canvasId:"webgpu"}).init(),o=document.getElementById("webgl");F(o);const g=new k({canvasId:"webgl",webGLcontextId:"webgl2"}),E=l.toGLSL(2),I=L.toGLSL(2),A=l.toWGSL(),D=L.toWGSL(l),R=c.toGLSL(2),O=y.toGLSL(2),T=c.toWGSL(),B=y.toWGSL(c),j={vertex:{glsl:E,wgsl:A},fragment:{glsl:I,wgsl:D},primitive:{topology:"triangle-list"}},z={vertex:{glsl:R,wgsl:T},fragment:{glsl:O,wgsl:B,targets:[{blend:{}}]},primitive:{topology:"triangle-list"}},n=18,i=new Float32Array(n*2),h=.1;for(let r=0;r<n;r++){const P=Math.PI*2*r/n;i[2*r]=h*Math.sin(P),i[2*r+1]=h*Math.cos(P)}const U=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),H=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),N={position:{data:i,format:"float32x2"}},Y={position:{data:U,format:"float32x2"},texcoord:{data:H,format:"float32x2"}},u=V(),f=ee();te(f,8,8,8);const w=V();X(w,u,f);const x={x:o.width,y:o.height},b={descriptor:{format:"rgba8unorm",size:[x.x,x.y]}},Z={minFilter:"nearest",magFilter:"nearest"},v={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{view:{texture:b,baseMipLevel:0},clearValue:[0,0,0,1]}],sampleCount:4},renderPassObjects:[{pipeline:{...j,primitive:{topology:"line-strip"}},bindingResources:{MVP:{value:u}},vertices:N,draw:{__type__:"DrawVertex",vertexCount:n}}]},{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[{pipeline:z,bindingResources:{diffuse:{texture:b,sampler:Z},MVP:{value:w}},vertices:Y,draw:{__type__:"DrawVertex",vertexCount:6}}]}]}]};g.submit(v),s.submit(v),J(g,s,o,t,0)});
