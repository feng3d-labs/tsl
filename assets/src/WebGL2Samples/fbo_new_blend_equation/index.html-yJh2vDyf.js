import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as b,v as f,u as T,e as C,b as R,p as g,g as W,c as A,f as B,W as S}from"../../../builtins-C5GxhwDd.js";import{W as H,a as D}from"../../../frame-comparison-CBkPASci.js";import{s as j}from"../../../sampler2D-DSRZ_QT6.js";import{t as z}from"../../../texture-D0-A-o9X.js";import{r as X}from"../../../return-DhHkPme9.js";import{m as V}from"../../../mat4-Pkjqt0vg.js";const U=b("position",f(),0),k=b("textureCoordinates",f(),1),q=T("mvp",V()),v=C("v_st",f()),p=R("main",()=>{g("highp","float"),g("highp","int"),v.assign(k),W.assign(q.multiply(A(U,0,1)))}),J=j(T("diffuse")),w=B("main",()=>{g("highp","float"),g("highp","int"),X(z(J,v))});function K(r,a){const o=new Image;return o.onload=function(){a(o)},o.src=r,o}function x(r){const a=window.devicePixelRatio||1;r.width=r.clientWidth*a,r.height=r.clientHeight*a}const n={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3,MAX:4};document.addEventListener("DOMContentLoaded",async()=>{const r=document.getElementById("webgpu");x(r);const a=await new H({canvasId:"webgpu"}).init(),o=document.getElementById("webgl");x(o);const h=new S({canvasId:"webgl",webGLcontextId:"webgl2"}),O=p.toGLSL(2),y=w.toGLSL(2),_=p.toWGSL(),L=w.toWGSL(p),t={vertex:{glsl:O,wgsl:_},fragment:{glsl:y,wgsl:L,targets:[{blend:{}}]},primitive:{topology:"triangle-list"}},G=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),F=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),I={position:{data:G,format:"float32x2"},textureCoordinates:{data:F,format:"float32x2"}},e={x:o.width,y:o.height},i=new Array(n.MAX);i[n.BOTTOM_LEFT]={x:0,y:0,width:e.x/2,height:e.y/2},i[n.BOTTOM_RIGHT]={x:e.x/2,y:0,width:e.x/2,height:e.y/2},i[n.TOP_RIGHT]={x:e.x/2,y:e.y/2,width:e.x/2,height:e.y/2},i[n.TOP_LEFT]={x:0,y:e.y/2,width:e.x/2,height:e.y/2},K("./images/Di-3d.png",m=>{const P={descriptor:{size:[m.width,m.height],format:"rgba8unorm",generateMipmap:!0},sources:[{image:m,mipLevel:0}]},E={minFilter:"linear",magFilter:"linear"},M=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c={pipeline:t,bindingResources:{mvp:{value:M},diffuse:{texture:P,sampler:E}},vertices:I,draw:{__type__:"DrawVertex",vertexCount:6}},l=[];for(let s=0;s<n.MAX;++s){const d=i[s];s===n.TOP_LEFT||(s===n.TOP_RIGHT?l.push({...c,viewport:d}):s===n.BOTTOM_RIGHT?l.push({...c,viewport:d,pipeline:{...t,fragment:{...t.fragment,targets:[{...t.fragment.targets[0],blend:{...t.fragment.targets[0].blend,color:{...t.fragment.targets[0].blend.color,operation:"min"},alpha:{...t.fragment.targets[0].blend.alpha,operation:"min"}}}]}}}):s===n.BOTTOM_LEFT&&l.push({...c,viewport:d,pipeline:{...t,fragment:{...t.fragment,targets:[{...t.fragment.targets[0],blend:{...t.fragment.targets[0].blend,color:{...t.fragment.targets[0].blend.color,operation:"max"},alpha:{...t.fragment.targets[0].blend.alpha,operation:"max"}}}]}}}))}const u={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[.5,0,0,1],loadOp:"clear"}]},renderPassObjects:l}]}]};h.submit(u),a.submit(u),D(h,a,o,r,0)})});
