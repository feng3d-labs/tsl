import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as _,v as u,u as g,e as K,b as O,g as W,c as r,o as Q,n as Y,f as C,p as c,q as d,W as Z}from"../../../builtins-C5GxhwDd.js";import{W as $,a as ee}from"../../../frame-comparison-CBkPASci.js";import{t as te}from"../../../texture-D0-A-o9X.js";import{r as re}from"../../../return-DhHkPme9.js";import{m as se}from"../../../mat4-Pkjqt0vg.js";const F=_("position",u()),ae=_("textureCoordinates",u()),S=g("mvp",se()),R=K("v_st",u()),m=O("main",()=>{R.assign(ae),W.assign(S.multiply(r(F,0,1)))}),oe=Q(g("diffuse")),ne=g("layer",Y()),E=C("main",()=>{c("highp","float"),c("highp","int"),c("lowp","sampler2DArray"),re(te(oe,R,ne))}),p=O("main",()=>{W.assign(S.multiply(r(F,0,1)))}),ie=r(d(0,"red")),le=r(d(1,"green")),ce=r(d(2,"blue")),A=C("main",()=>{ie.assign(r(.5,0,0,1)),le.assign(r(0,.3,0,1)),ce.assign(r(0,0,.8,1))});document.addEventListener("DOMContentLoaded",async()=>{const V=m.toGLSL(2),P=E.toGLSL(2),D=m.toWGSL(),M=E.toWGSL(m),z=p.toGLSL(2),B=A.toGLSL(2),I=p.toWGSL(),j=A.toWGSL(p),i=window.devicePixelRatio||1,s=document.getElementById("webgpu");s.width=s.clientWidth*i,s.height=s.clientHeight*i;const y=await new $({canvasId:"webgpu"}).init(),n=document.getElementById("webgl");n.width=n.clientWidth*i,n.height=n.clientHeight*i;const w=new Z({canvasId:"webgl",webGLcontextId:"webgl2"}),e={x:s.width,y:s.height},t={RED:0,GREEN:1,BLUE:2,MAX:3},a=new Array(t.MAX);a[t.RED]={x:e.x/2,y:0,z:e.x/2,w:e.y/2},a[t.GREEN]={x:e.x/2,y:e.y/2,z:e.x/2,w:e.y/2},a[t.BLUE]={x:0,y:e.y/2,z:e.x/2,w:e.y/2};const x=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),U=new Float32Array([0,0,1,0,1,1,1,1,0,1,0,0]),N={vertices:{position:{data:x,format:"float32x2"}}},X={vertices:{position:{data:x,format:"float32x2"},textureCoordinates:{data:U,format:"float32x2"}}},v=16,b=16,l={descriptor:{size:[v,b,3],dimension:"2d-array",format:"rgba8unorm"}},H={minFilter:"nearest",magFilter:"nearest",lodMinClamp:0,lodMaxClamp:0},q={colorAttachments:[{view:{texture:l,baseMipLevel:0,baseArrayLayer:t.RED}},{view:{texture:l,baseMipLevel:0,baseArrayLayer:t.GREEN}},{view:{texture:l,baseMipLevel:0,baseArrayLayer:t.BLUE}}]},h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),T={descriptor:q,renderPassObjects:[{viewport:{x:0,y:0,width:v,height:b},pipeline:{vertex:{glsl:z,wgsl:I},fragment:{glsl:B,wgsl:j},primitive:{topology:"triangle-list"}},bindingResources:{mvp:{value:h}},vertices:N.vertices,draw:{__type__:"DrawVertex",vertexCount:6}}]},k={vertex:{glsl:V,wgsl:D},fragment:{glsl:P,wgsl:M},primitive:{topology:"triangle-list"}},f=[],J={descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:f},L={pipeline:k,bindingResources:{mvp:{value:h},diffuse:{texture:l,sampler:H}},vertices:X.vertices,draw:{__type__:"DrawVertex",vertexCount:6}};for(let o=0;o<t.MAX;++o)f.push({viewport:{x:a[o].x,y:a[o].y,width:a[o].z,height:a[o].w},...L,bindingResources:{...L.bindingResources,layer:{value:o}},draw:{__type__:"DrawVertex",vertexCount:6}});const G={commandEncoders:[{passEncoders:[T,J]}]};y.submit(G),w.submit(G),ee(w,y,n,s,0)});
