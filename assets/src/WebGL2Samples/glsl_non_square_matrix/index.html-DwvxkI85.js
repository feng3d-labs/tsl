import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{V as g,y as p,a as v,v as i,u as L,e as $,b as C,p as s,g as I,c as u,f as V,W as A}from"../../../builtins-C5GxhwDd.js";import{W as E,a as M}from"../../../frame-comparison-CBkPASci.js";import{s as z}from"../../../sampler2D-DSRZ_QT6.js";import{t as D}from"../../../texture-D0-A-o9X.js";import{r as O}from"../../../return-DhHkPme9.js";class R{constructor(){this.glslType="mat4x3",this.wgslType="mat4x3<f32>"}multiply(e){const t=new g;return t.toGLSL=()=>`${this.toGLSL()} * ${e.toGLSL()}`,t.toWGSL=()=>`${this.toWGSL()} * ${e.toWGSL()}`,t.dependencies=[this,e],t}col(e){const t=new g;return t.toGLSL=()=>`${p(this.toGLSL())}[${e}]`,t.toWGSL=()=>`${p(this.toWGSL())}[${e}]`,t.dependencies=[this],t}}function B(...o){return new R(...o)}const T=v("position",i(),0),j=v("texcoord",i(),1),f=L("MVP",B()),x=$("v_st",i()),a=C("main",()=>{s("highp","float"),s("highp","int"),x.assign(j),I.assign(u(f.multiply(u(T,0,1)).add(f.col(3)),1))}),H=z(L("diffuse")),w=V("main",()=>{s("highp","float"),s("highp","int"),O(D(H,x))});function U(o,e){const t=new Image;return t.onload=function(){e(t)},t.src=o,t}function h(o){const e=window.devicePixelRatio||1;o.width=o.clientWidth*e,o.height=o.clientHeight*e}document.addEventListener("DOMContentLoaded",async()=>{const o=a.toGLSL(2),e=w.toGLSL(2),t=a.toWGSL(),b=w.toWGSL(a),r=document.getElementById("webgpu");h(r);const c=await new E({canvasId:"webgpu"}).init(),l=document.getElementById("webgl");h(l);const m=new A({canvasId:"webgl",webGLcontextId:"webgl2"});U("./images/Di-3d.png",n=>{const G=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),S=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),y={vertices:{position:{data:G,format:"float32x2"},texcoord:{data:S,format:"float32x2"}}},W={descriptor:{size:[n.width,n.height],format:"rgba8unorm"},sources:[{image:n,flipY:!1}]},F={minFilter:"nearest",magFilter:"nearest"},P={vertex:{glsl:o,wgsl:t},fragment:{glsl:e,wgsl:b},primitive:{topology:"triangle-list"}},_=new Float32Array([.5,0,0,0,.5,0,0,0,.5,.2,-.2,0]),d={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[{pipeline:P,vertices:y.vertices,bindingResources:{MVP:{value:_},diffuse:{texture:W,sampler:F}},draw:{__type__:"DrawVertex",vertexCount:6}}]}]}]};m.submit(d),c.submit(d),M(m,c,l,r,0)})});
