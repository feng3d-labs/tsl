import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as S,d as E,b as G,p as r,g as W,c as u,f as P,W as C}from"../../../builtins-C5GxhwDd.js";import{W as I,a as j}from"../../../frame-comparison-CBkPASci.js";import{r as A}from"../../../return-DhHkPme9.js";const Q=S("pos",E(),0),o=G("main",()=>{r("highp","float"),r("highp","int"),W.assign(u(Q,1))}),g=P("main",()=>{r("highp","float"),r("highp","int"),A(u(1,.5,0,1))});function m(e){const t=window.devicePixelRatio||1;e.width=e.clientWidth*t,e.height=e.clientHeight*t}document.addEventListener("DOMContentLoaded",async()=>{const e=document.getElementById("webgpu");m(e);const t=await new I({canvasId:"webgpu"}).init(),c=document.getElementById("webgl");m(c);const a=new C({canvasId:"webgl",webGLcontextId:"webgl2"}),b=o.toGLSL(2),w=g.toGLSL(2),h=o.toWGSL(),v=g.toWGSL(o),i={vertex:{glsl:b,wgsl:h},fragment:{glsl:w,wgsl:v,targets:[{blend:{}}]},depthStencil:{},primitive:{topology:"triangle-list"}},l={vertices:{pos:{data:new Float32Array([-.3,-.5,0,.3,-.5,0,0,.5,0,-.3,-.5,.5,.3,-.5,.5,0,.5,.5]),format:"float32x3"}}},d={pipeline:i,vertices:l.vertices,draw:{__type__:"DrawVertex",firstVertex:0,vertexCount:3}},p={pipeline:i,vertices:l.vertices,draw:{__type__:"DrawVertex",firstVertex:3,vertexCount:3}},y={__type__:"OcclusionQuery",renderObjects:[p],onQuery(s){const n=document.getElementById("webgl-query-result");n&&(n.innerHTML=`WebGL: 通过深度测试的样本数: ${s}`)}},f={__type__:"OcclusionQuery",renderObjects:[p],onQuery(s){const n=document.getElementById("webgpu-query-result");n&&(n.innerHTML=`WebGPU: 通过深度测试的样本数: ${s}`)}},_={descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}],depthStencilAttachment:{depthLoadOp:"clear"}},renderPassObjects:[d,y]},x={descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}],depthStencilAttachment:{depthLoadOp:"clear"}},renderPassObjects:[d,f]},L={commandEncoders:[{passEncoders:[_]}]},O={commandEncoders:[{passEncoders:[x]}]};a.submit(L),t.submit(O),j(a,t,c,e,0)});
