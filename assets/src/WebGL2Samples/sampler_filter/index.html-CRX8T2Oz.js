import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as v,v as g,u as M,e as C,b as E,p as l,g as P,c as b,q as R,f as A,W as B}from"../../../builtins-C5GxhwDd.js";import{W as S,a as H}from"../../../frame-comparison-CBkPASci.js";import{s as V}from"../../../sampler2D-DSRZ_QT6.js";import{t as U}from"../../../texture-D0-A-o9X.js";import{m as D}from"../../../mat4-Pkjqt0vg.js";const z=v("position",g(),0),X=v("textureCoordinates",g(),4),j=M("mvp",D()),y=C("v_st",g()),c=E("main",()=>{l("highp","float"),l("highp","int"),y.assign(X),P.assign(j.multiply(b(z,0,1)))}),q=V(M("diffuse")),k=b(R(0,"color")),x=A("main",()=>{l("highp","float"),l("highp","int"),k.assign(U(q,y))});function J(o,s){const a=new Image;return a.onload=function(){s(a)},a.src=o,a}function T(o){const s=window.devicePixelRatio||1;o.width=o.clientWidth*s,o.height=o.clientHeight*s}const t={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3,MAX:4};document.addEventListener("DOMContentLoaded",async()=>{const o=c.toGLSL(2),s=x.toGLSL(2),a=c.toWGSL(),O=x.toWGSL(c),p=document.getElementById("webgpu");T(p);const u=await new S({canvasId:"webgpu"}).init(),n=document.getElementById("webgl");T(n);const h=new B({canvasId:"webgl",webGLcontextId:"webgl2"}),e={x:n.width,y:n.height},r=new Array(t.MAX);r[t.BOTTOM_LEFT]={x:0,y:0,width:e.x/2,height:e.y/2},r[t.BOTTOM_RIGHT]={x:e.x/2,y:0,width:e.x/2,height:e.y/2},r[t.TOP_RIGHT]={x:e.x/2,y:e.y/2,width:e.x/2,height:e.y/2},r[t.TOP_LEFT]={x:0,y:e.y/2,width:e.x/2,height:e.y/2};const F=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),_=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),L={position:{data:F,format:"float32x2"},textureCoordinates:{data:_,format:"float32x2"}},i=[];i[t.TOP_LEFT]={minFilter:"nearest",magFilter:"nearest",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge"},i[t.TOP_RIGHT]={minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge"},i[t.BOTTOM_RIGHT]={minFilter:"linear",magFilter:"linear",mipmapFilter:"nearest",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge"},i[t.BOTTOM_LEFT]={minFilter:"linear",magFilter:"linear",mipmapFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge"},J("./images/Di-3d.png",m=>{const G={descriptor:{size:[m.width,m.height],format:"rgba8unorm",generateMipmap:!0},sources:[{image:m,mipLevel:0}]},I=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),W={vertex:{glsl:o,wgsl:a},fragment:{glsl:s,wgsl:O,targets:[{blend:{}}]},primitive:{topology:"triangle-list"}},w=[];for(let d=0;d<t.MAX;++d)w.push({pipeline:W,vertices:L,viewport:r[d],bindingResources:{mvp:{value:I},diffuse:{texture:G,sampler:i[d]}},draw:{__type__:"DrawVertex",vertexCount:6,instanceCount:1}});const f={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:w}]}]};h.submit(f),u.submit(f),H(h,u,n,p,0)})});
