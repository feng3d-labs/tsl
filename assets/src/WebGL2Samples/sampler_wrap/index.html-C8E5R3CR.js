import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as v,v as p,u as F,e as E,b as P,p as d,g as R,c as b,q as W,f as A,W as B}from"../../../builtins-C5GxhwDd.js";import{W as S,a as H}from"../../../frame-comparison-CBkPASci.js";import{s as V}from"../../../sampler2D-DSRZ_QT6.js";import{t as U}from"../../../texture-D0-A-o9X.js";import{m as D}from"../../../mat4-Pkjqt0vg.js";const z=v("position",p(),0),X=v("textureCoordinates",p(),4),j=F("mvp",D()),y=E("v_st",p()),c=P("main",()=>{d("highp","float"),d("highp","int"),y.assign(X),R.assign(j.multiply(b(z,0,1)))}),q=V(F("diffuse")),k=b(W(0,"color")),x=A("main",()=>{d("highp","float"),d("highp","int"),k.assign(U(q,y))});function J(r,i){const o=new Image;return o.onload=function(){i(o)},o.src=r,o}function T(r){const i=window.devicePixelRatio||1;r.width=r.clientWidth*i,r.height=r.clientHeight*i}const t={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3,MAX:4};document.addEventListener("DOMContentLoaded",async()=>{const r=c.toGLSL(2),i=x.toGLSL(2),o=c.toWGSL(),O=x.toWGSL(c),g=document.getElementById("webgpu");T(g);const u=await new S({canvasId:"webgpu"}).init(),n=document.getElementById("webgl");T(n);const h=new B({canvasId:"webgl",webGLcontextId:"webgl2"}),e={x:n.width,y:n.height},a=new Array(t.MAX);a[t.BOTTOM_LEFT]={x:0,y:0,width:e.x/2,height:e.y/2},a[t.BOTTOM_RIGHT]={x:e.x/2,y:0,width:e.x/2,height:e.y/2},a[t.TOP_RIGHT]={x:e.x/2,y:e.y/2,width:e.x/2,height:e.y/2},a[t.TOP_LEFT]={x:0,y:e.y/2,width:e.x/2,height:e.y/2};const M=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),_=new Float32Array([-2,2,2,2,2,-2,2,-2,-2,-2,-2,2]),L={position:{data:M,format:"float32x2"},textureCoordinates:{data:_,format:"float32x2"}},s=[];s[t.TOP_LEFT]={minFilter:"linear",magFilter:"linear",mipmapFilter:"linear",addressModeU:"mirror-repeat",addressModeV:"mirror-repeat"},s[t.TOP_RIGHT]={minFilter:"linear",magFilter:"linear",mipmapFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"mirror-repeat"},s[t.BOTTOM_RIGHT]={minFilter:"linear",magFilter:"linear",mipmapFilter:"linear",addressModeU:"repeat",addressModeV:"repeat"},s[t.BOTTOM_LEFT]={minFilter:"linear",magFilter:"linear",mipmapFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},J("./images/Di-3d.png",m=>{const G={descriptor:{size:[m.width,m.height],format:"rgba8unorm",generateMipmap:!0},sources:[{image:m,mipLevel:0}]},I=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),C={vertex:{glsl:r,wgsl:o},fragment:{glsl:i,wgsl:O,targets:[{blend:{}}]},primitive:{topology:"triangle-list"}},w=[];for(let l=0;l<t.MAX;++l)w.push({pipeline:C,vertices:L,viewport:a[l],bindingResources:{mvp:{value:I},diffuse:{texture:G,sampler:s[l]}},draw:{__type__:"DrawVertex",vertexCount:6,instanceCount:1}});const f={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:w}]}]};h.submit(f),u.submit(f),H(h,u,n,g,0)})});
