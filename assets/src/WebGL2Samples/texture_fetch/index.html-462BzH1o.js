import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as L,v as g,u as C,e as I,b as z,p as d,g as A,c as F,q as E,f as V,A as n,W as D}from"../../../builtins-C5GxhwDd.js";import{W as M,a as O}from"../../../frame-comparison-CBkPASci.js";import{l as o}from"../../../let-Czo32qSi.js";import{s as R}from"../../../sampler2D-DSRZ_QT6.js";import{t as m}from"../../../texelFetch-Bo1BpNhZ.js";import{t as B}from"../../../textureSize-DF-iDVy_.js";import{f as j}from"../../../fract-fjFXQogY.js";import{m as w}from"../../../mix-vZRoDtYO.js";import{m as q}from"../../../mat4-Pkjqt0vg.js";import"../../../wgslKeywords-TYZDccpG.js";const H=L("position",g(),0),U=L("texcoord",g(),4),Y=C("MVP",q()),G=I("v_st",g()),b=z("main",()=>{d("highp","float"),d("highp","int"),G.assign(U),A.assign(Y.multiply(F(H,0,1)))}),r=R(C("diffuse")),k=F(E(0,"color")),h=V("main",()=>{d("highp","float"),d("highp","int");const e=o("size",g(B(r,0).subtract(1))),s=o("texcoord",G.multiply(e)),t=o("coord",n(s)),p=o("texel00",m(r,t.add(n(0,0)),0)),i=o("texel10",m(r,t.add(n(1,0)),0)),c=o("texel11",m(r,t.add(n(1,1)),0)),l=o("texel01",m(r,t.add(n(0,1)),0)),a=o("sampleCoord",j(s)),f=o("texel0",w(p,l,a.y)),x=o("texel1",w(i,c,a.y));k.assign(w(f,x,a.x))});function J(e,s){const t=new Image;return t.onload=function(){s(t)},t.src=e,t}function y(e){const s=window.devicePixelRatio||1;e.width=e.clientWidth*s,e.height=e.clientHeight*s}document.addEventListener("DOMContentLoaded",async()=>{const e=b.toGLSL(2),s=h.toGLSL(2),t=b.toWGSL(),p=h.toWGSL(b),i=document.getElementById("webgpu");y(i);const c=await new M({canvasId:"webgpu"}).init(),l=document.getElementById("webgl");y(l);const a=new D({canvasId:"webgl",webGLcontextId:"webgl2"}),f=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),x=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),W={position:{data:f,format:"float32x2"},texcoord:{data:x,format:"float32x2"}};J("./images/Di-3d.png",u=>{const P={descriptor:{size:[u.width,u.height],format:"rgba8unorm"},sources:[{image:u,mipLevel:0,flipY:!1}]},S={minFilter:"nearest",magFilter:"nearest"},_=new Float32Array([.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1]),v={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[{pipeline:{vertex:{glsl:e,wgsl:t},fragment:{glsl:s,wgsl:p,targets:[{blend:{}}]},primitive:{topology:"triangle-list"}},vertices:W,bindingResources:{MVP:{value:_},diffuse:{texture:P,sampler:S}},draw:{__type__:"DrawVertex",vertexCount:6,instanceCount:1}}]}]}]};a.submit(v),c.submit(v),O(a,c,l,i,0)})});
