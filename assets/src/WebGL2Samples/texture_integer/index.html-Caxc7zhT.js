import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as f,v as i,u as w,e as W,b as P,p as s,g as F,c as r,B as I,q as S,f as _,W as D}from"../../../builtins-C5GxhwDd.js";import{W as E,a as V}from"../../../frame-comparison-CBkPASci.js";import{t as A}from"../../../texture-D0-A-o9X.js";import{m as M}from"../../../mat4-Pkjqt0vg.js";const B=f("position",i(),0),O=f("texcoord",i(),4),R=w("MVP",M()),v=W("v_st",i()),a=P("main",()=>{s("highp","float"),s("highp","int"),v.assign(O),F.assign(R.multiply(r(B,0,1)))}),z=I(w("diffuse")),j=r(S(0,"color")),p=_("main",()=>{s("highp","float"),s("highp","int"),s("highp","usampler2D");const t=A(z,v).divide(32).multiply(32);j.assign(r(t).divide(255))});function q(t,e){const o=new Image;return o.onload=function(){e(o)},o.src=t,o}function u(t){const e=window.devicePixelRatio||1;t.width=t.clientWidth*e,t.height=t.clientHeight*e}document.addEventListener("DOMContentLoaded",async()=>{const t=a.toGLSL(2),e=p.toGLSL(2),o=a.toWGSL({convertDepth:!0}),h=p.toWGSL(a),c=document.getElementById("webgpu");u(c);const l=await new E({canvasId:"webgpu"}).init(),m=document.getElementById("webgl");u(m);const g=new D({canvasId:"webgl",webGLcontextId:"webgl2"}),b=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),x=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),y={position:{data:b,format:"float32x2"},texcoord:{data:x,format:"float32x2"}};q("./images/Di-3d.png",n=>{const L={descriptor:{size:[n.width,n.height],format:"rgba8uint"},sources:[{mipLevel:0,image:n,flipY:!1}]},C={minFilter:"nearest",magFilter:"nearest"},G=new Float32Array([.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1]),d={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[{pipeline:{vertex:{glsl:t,wgsl:o},fragment:{glsl:e,wgsl:h,targets:[{blend:{}}]},primitive:{topology:"triangle-list"}},vertices:y,bindingResources:{MVP:{value:G},diffuse:{texture:L,sampler:C}},draw:{__type__:"DrawVertex",vertexCount:6,instanceCount:1}}]}]}]};g.submit(d),l.submit(d),V(g,l,m,c,0)})});
