import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as w,v as i,u as f,e as P,b as S,p as s,g as C,c as F,f as E,W as A}from"../../../builtins-C5GxhwDd.js";import{W as V,a as M}from"../../../frame-comparison-CBkPASci.js";import{s as O}from"../../../sampler2D-DSRZ_QT6.js";import{t as z}from"../../../texture-D0-A-o9X.js";import{r as R}from"../../../return-DhHkPme9.js";import{m as B}from"../../../mat4-Pkjqt0vg.js";const U=w("position",i(),0),j=w("texcoord",i(),4),H=f("MVP",B()),v=P("v_st",i()),r=S("main",()=>{s("highp","float"),s("highp","int"),v.assign(j),C.assign(H.multiply(F(U,0,1)))}),T=O(f("diffuse")),h=E("main",()=>{s("highp","float"),s("highp","int"),R(z(T,v))});function k(e,a){const o=new Image;return o.onload=function(){a(o)},o.src=e,o}function u(e){const a=window.devicePixelRatio||1;e.width=e.clientWidth*a,e.height=e.clientHeight*a}document.addEventListener("DOMContentLoaded",async()=>{const e=r.toGLSL(2),a=h.toGLSL(2),o=r.toWGSL({convertDepth:!0}),x=h.toWGSL(r),c=document.getElementById("webgpu");u(c);const d=await new V({canvasId:"webgpu"}).init(),l=document.getElementById("webgl");u(l);const m=new A({canvasId:"webgl",webGLcontextId:"webgl2"}),b=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),y=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),L={position:{data:b,format:"float32x2"},texcoord:{data:y,format:"float32x2"}};k("./images/Di-3d.png",t=>{const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const g=n.getContext("2d");g.drawImage(t,0,0);const _=g.getImageData(0,0,t.width,t.height),I=new Uint8Array(_.data.buffer),G={descriptor:{size:[t.width/2,t.height/2],format:"rgba8unorm"},sources:[{__type__:"TextureDataSource",mipLevel:0,size:[t.width/2,t.height/2],data:I,dataLayout:{width:t.width},dataImageOrigin:[t.width/4,t.height/4]}]},W={minFilter:"nearest",magFilter:"nearest"},D=new Float32Array([.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1]),p={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[{pipeline:{vertex:{glsl:e,wgsl:o},fragment:{glsl:a,wgsl:x,targets:[{blend:{}}]},primitive:{topology:"triangle-list"}},vertices:L,bindingResources:{MVP:{value:D},diffuse:{texture:G,sampler:W}},draw:{__type__:"DrawVertex",vertexCount:6}}]}]}]};m.submit(p),d.submit(p),M(m,d,l,c,0)})});
