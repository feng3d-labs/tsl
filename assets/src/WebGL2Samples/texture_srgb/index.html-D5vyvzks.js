import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a6 as O,a as V,v as n,u as j,e as c,c as o,b as k,p as f,g as J,f as K,h as m,q as N,d,W as Q}from"../../../builtins-C5GxhwDd.js";import{W as X,a as Z}from"../../../frame-comparison-CBkPASci.js";import{l as g}from"../../../let-Czo32qSi.js";import{v as ss}from"../../../var-BrV_KNjZ.js";import{s as ts}from"../../../sampler2D-DSRZ_QT6.js";import{t as i}from"../../../texture-D0-A-o9X.js";import{r as q}from"../../../return-DhHkPme9.js";import{d as os}from"../../../dot-di-r-mUL.js";import{B as as,m as r}from"../../../mix-vZRoDtYO.js";import{p as ns}from"../../../pow-BSCluLP5.js";import{c as rs}from"../../../clamp-DYFz6aCQ.js";import{f as is}from"../../../fract-fjFXQogY.js";import{m as es}from"../../../mat4-Pkjqt0vg.js";import"../../../wgslKeywords-TYZDccpG.js";function ls(t,s){const l=new as;return l.toGLSL=()=>`lessThan(${t.toGLSL()}, ${s.toGLSL()})`,l.toWGSL=()=>`(${t.toWGSL()} < ${s.toWGSL()})`,l.dependencies=[t,s],l}const cs=O("rgbToSrgb",[["colorRGB",d],["gammaCorrection",m]],d,(t,s)=>{const l=g("clampedColorRGB",rs(t,0,1));q(r(ns(l,d(s)).multiply(1.055).subtract(.055),l.multiply(12.92),ls(l,d(.0031308))))}),gs=O("contrastSaturationBrightness",[["color",d],["brt",m],["sat",m],["con",m]],d,(t,s,l,b)=>{const u=g("lumCoeff",d(.2125,.7154,.0721)),_=g("brtColor",t.multiply(s)),p=g("intensity",d(os(_,u))),x=g("satColor",r(p,_,l)),y=g("conColor",r(d(.5),x,b));q(y)}),ds=V("position",n(),0),ms=V("textureCoordinates",n(),4),us=j("mvp",es()),a=c("v_st",n(),{location:0}),w=c("v_blur_01",o(),{location:1}),C=c("v_blur_23",o(),{location:2}),L=c("v_blur_45",o(),{location:3}),G=c("v_blur_67",o(),{location:4}),z=c("v_blur_89",o(),{location:5}),S=c("v_blur_AB",o(),{location:6}),B=c("v_blur_CD",o(),{location:7}),D=c("h_blur_01",o(),{location:8}),W=c("h_blur_23",o(),{location:9}),A=c("h_blur_45",o(),{location:10}),R=c("h_blur_67",o(),{location:11}),F=c("h_blur_89",o(),{location:12}),I=c("h_blur_AB",o(),{location:13}),E=c("h_blur_CD",o(),{location:14}),v=k("main",()=>{f("highp","float"),f("highp","int"),a.assign(ms),J.assign(us.multiply(o(ds,0,1))),w.assign(o(a.add(n(0,-.05)),a.add(n(0,-.036)))),C.assign(o(a.add(n(0,-.02)),a.add(n(0,-.016)))),L.assign(o(a.add(n(0,-.012)),a.add(n(0,-.008)))),G.assign(o(a.add(n(0,-.004)),a.add(n(0,.004)))),z.assign(o(a.add(n(0,.008)),a.add(n(0,.012)))),S.assign(o(a.add(n(0,.016)),a.add(n(0,.02)))),B.assign(o(a.add(n(0,.036)),a.add(n(0,.05)))),D.assign(o(a.add(n(-.05,0)),a.add(n(-.036,0)))),W.assign(o(a.add(n(-.02,0)),a.add(n(-.016,0)))),A.assign(o(a.add(n(-.012,0)),a.add(n(-.008,0)))),R.assign(o(a.add(n(-.004,0)),a.add(n(.004,0)))),F.assign(o(a.add(n(.008,0)),a.add(n(.012,0)))),I.assign(o(a.add(n(.016,0)),a.add(n(.02,0)))),E.assign(o(a.add(n(.036,0)),a.add(n(.05,0))))}),e=ts(j("materialDiffuse")),T=K("main",()=>{f("highp","float"),f("highp","int");const t=g("sampleCoord",is(a)),s=ss("colorRgb",o(i(e,a).xyz,1));s.assign(r(s,i(e,w.xy),t.y)),s.assign(r(s,i(e,w.zw),t.y)),s.assign(r(s,i(e,C.xy),t.y)),s.assign(r(s,i(e,C.zw),t.y)),s.assign(r(s,i(e,L.xy),t.y)),s.assign(r(s,i(e,L.zw),t.y)),s.assign(r(s,i(e,G.xy),t.y)),s.assign(r(s,i(e,G.zw),t.y)),s.assign(r(s,i(e,z.xy),t.y)),s.assign(r(s,i(e,z.zw),t.y)),s.assign(r(s,i(e,S.xy),t.y)),s.assign(r(s,i(e,S.zw),t.y)),s.assign(r(s,i(e,B.xy),t.y)),s.assign(r(s,i(e,B.zw),t.y)),s.assign(r(s,i(e,D.xy),t.x)),s.assign(r(s,i(e,D.zw),t.x)),s.assign(r(s,i(e,W.xy),t.x)),s.assign(r(s,i(e,W.zw),t.x)),s.assign(r(s,i(e,A.xy),t.x)),s.assign(r(s,i(e,A.zw),t.x)),s.assign(r(s,i(e,R.xy),t.x)),s.assign(r(s,i(e,R.zw),t.x)),s.assign(r(s,i(e,F.xy),t.x)),s.assign(r(s,i(e,F.zw),t.x)),s.assign(r(s,i(e,I.xy),t.x)),s.assign(r(s,i(e,I.zw),t.x)),s.assign(r(s,i(e,E.xy),t.x)),s.assign(r(s,i(e,E.zw),t.x));const l=g("brightness",m(1)),b=g("saturation",m(.5)),u=g("contrast",m(1));s.assign(o(gs(s.rgb,l,b,u),1)),o(N(0,"color")).assign(o(cs(s.rgb,m(.41666)),1))});function _s(t,s){const l=new Image;return l.onload=function(){s(l)},l.src=t,l}function $(t){const s=window.devicePixelRatio||1;t.width=t.clientWidth*s,t.height=t.clientHeight*s}document.addEventListener("DOMContentLoaded",async()=>{const t=v.toGLSL(2),s=T.toGLSL(2),l=v.toWGSL({convertDepth:!0}),b=T.toWGSL(v),u=document.getElementById("webgpu");$(u);const _=await new X({canvasId:"webgpu"}).init(),p=document.getElementById("webgl");$(p);const x=new Q({canvasId:"webgl",webGLcontextId:"webgl2"}),y=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),H=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),M={position:{data:y,format:"float32x2"},textureCoordinates:{data:H,format:"float32x2"}},U=new Float32Array([.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1]);_s("./images/Di-3d.png",h=>{const Y={descriptor:{size:[h.width,h.height],format:"rgba8unorm-srgb"},sources:[{image:h,flipY:!1}]},P={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[{pipeline:{vertex:{glsl:t,wgsl:l},fragment:{glsl:s,wgsl:b,targets:[{blend:{}}]},primitive:{topology:"triangle-list"}},vertices:M,draw:{__type__:"DrawVertex",vertexCount:6},bindingResources:{mvp:{value:U},materialDiffuse:{texture:Y,sampler:{minFilter:"linear",magFilter:"linear"}}}}]}]}]};x.submit(P),_.submit(P),Z(x,_,p,u,0)})});
