import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as m,c as o,u as B,e as P,p as e,g as L,v as W,f as S,b as M,W as I,J as h}from"../../../builtins-C5GxhwDd.js";import{W as O,a as D}from"../../../frame-comparison-CBkPASci.js";import{t as N}from"../../../transform-D6sp5tn9.js";import{r as k}from"../../../return-DhHkPme9.js";import{c as j}from"../../../clamp-DYFz6aCQ.js";import{m as U}from"../../../mat4-Pkjqt0vg.js";const x=m("position",o(),0),z=B("MVP",U()),H=P("v_color",o()),F=N("main",()=>{e("highp","float"),e("highp","int"),L.assign(z.multiply(x)),H.assign(o(j(W(x),0,1),0,1))});S("main",()=>{e("highp","float"),e("highp","int"),k(o(1,1,1,1))});const J=m("position",o(),0),K=m("color",o(),3),G=P("v_color",o()),f=M("main",()=>{e("highp","float"),e("highp","int"),L.assign(J),G.assign(K)}),y=S("main",()=>{e("highp","float"),e("highp","int"),k(G)});function E(r){const n=window.devicePixelRatio||1;r.width=r.clientWidth*n,r.height=r.clientHeight*n}document.addEventListener("DOMContentLoaded",async()=>{const r=F.toGLSL(),n=F.toWGSL({varyings:["gl_Position","v_color"]}),A=f.toGLSL(2),T=y.toGLSL(2),C=f.toWGSL(),R=y.toWGSL(f),i=32,c=6,l=0,s=1,a=[new Float32Array([-1,-1,0,1,1,-1,0,1,1,1,0,1,1,1,0,1,-1,1,0,1,-1,-1,0,1]),new Float32Array(i*c/Float32Array.BYTES_PER_ELEMENT)],d=[{vertices:{position:{data:a[l],format:"float32x4"}}},{vertices:{position:{data:a[s],format:"float32x4",arrayStride:i,offset:0},color:{data:a[s],format:"float32x4",arrayStride:i,offset:i/2}}}],g={vertex:{glsl:r,wgsl:n},transformFeedbackVaryings:{varyings:["gl_Position","v_color"],bufferMode:"INTERLEAVED_ATTRIBS"}},p={vertex:{glsl:A,wgsl:C},fragment:{glsl:T,wgsl:R}},b={bindBuffers:[{index:0,data:a[s]}]},V=new Float32Array([.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1]),v={commandEncoders:[{passEncoders:[{__type__:"TransformFeedbackPass",transformFeedbackObjects:[{pipeline:g,vertices:d[l].vertices,uniforms:{MVP:{value:V}},transformFeedback:b,draw:{__type__:"DrawVertex",vertexCount:c}}]},{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[{pipeline:p,vertices:d[s].vertices,draw:{__type__:"DrawVertex",vertexCount:c}}]}]}]},u=document.getElementById("webgl");E(u);const t=new I({canvasId:"webgl",webGLcontextId:"webgl2",webGLContextAttributes:{antialias:!1}}),_=document.getElementById("webgpu");E(_);const w=await new O({canvasId:"webgpu"}).init();t.submit(v),w.submit(v),D(t,w,u,_,0),t.deleteTransformFeedback(b),t.deleteBuffer(h.getBuffer(a[l].buffer)),t.deleteBuffer(h.getBuffer(a[s].buffer)),t.deleteProgram(g),t.deleteProgram(p)});
