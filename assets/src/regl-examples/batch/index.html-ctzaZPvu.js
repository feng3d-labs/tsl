import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as O,v as h,u,h as S,c as A,b as R,f as j,p as C,W as P,r as y}from"../../../builtins-C5GxhwDd.js";import{W as _,a as F}from"../../../frame-comparison-CBkPASci.js";import{r as E}from"../../../return-DhHkPme9.js";import{c as H}from"../../../cos-0AUzw8Ns.js";import{s as B}from"../../../sin-C4vXRgAE.js";const c=O("position",h()),W=u("angle",S()),L=u("offset",h()),D=u("color",A()),g=R("main",()=>{const a=H(W),r=B(W),l=a.multiply(c.x).add(r.multiply(c.y)),d=S(-1).multiply(r).multiply(c.x).add(a.multiply(c.y)),t=h(l.add(L.x),d.add(L.y));E(A(t,0,1))}),G=j("main",()=>{C("mediump","float"),E(D)});document.addEventListener("DOMContentLoaded",async()=>{const a=g.toGLSL(),r=G.toGLSL(),l=g.toWGSL(),d=G.toWGSL(g),t=window.devicePixelRatio||1,n=document.getElementById("webgpu");n.width=window.innerWidth*t,n.height=window.innerHeight*t;const w=await new _({canvasId:"webgpu"}).init(),o=document.getElementById("webgl");o.width=window.innerWidth*t,o.height=window.innerHeight*t;const p=new P({canvasId:"webgl",webGLcontextId:"webgl2"});let s=0;const f=[{offset:[-1,-1]},{offset:[-1,0]},{offset:[-1,1]},{offset:[0,-1]},{offset:[0,0]},{offset:[0,1]},{offset:[1,-1]},{offset:[1,0]},{offset:[1,1]}],I={vertices:{position:{data:new Float32Array([.5,0,0,.5,1,1]),format:"float32x2"}}};function M(e){return{vertices:I.vertices,draw:{__type__:"DrawVertex",vertexCount:3},bindingResources:{offset:{value:f[e].offset}},pipeline:{vertex:{glsl:a,wgsl:l},fragment:{glsl:r,wgsl:d},depthStencil:{depthWriteEnabled:!1}}}}const m=[];for(let e=0;e<f.length;e++)m.push(M(e));const b={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1]}]},renderPassObjects:m}]}]};function v(){o.width=o.clientWidth*t,o.height=o.clientHeight*t,n.width=n.clientWidth*t,n.height=n.clientHeight*t,s++;for(let e=0;e<f.length;e++){const i=e,x=m[e];y(x.bindingResources).color={value:[Math.sin(.02*((.1+Math.sin(i))*s+3*i)),Math.cos(.02*(.02*s+.1*i)),Math.sin(.02*((.3+Math.cos(2*i))*s+.8*i)),1]},y(x.bindingResources).angle={value:.01*s}}w.submit(b),p.submit(b),s===1&&F(p,w,o,n,0),requestAnimationFrame(v)}v()});
