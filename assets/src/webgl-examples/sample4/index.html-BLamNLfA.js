import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as V,v as O,c as l,u as P,e as _,b as A,g as I,f as R,W as E,r as q}from"../../../builtins-C5GxhwDd.js";import{W as H,a as z}from"../../../frame-comparison-CBkPASci.js";import{v as B}from"../../../var-BrV_KNjZ.js";import{r as D}from"../../../return-DhHkPme9.js";import{m as C}from"../../../mat4-Pkjqt0vg.js";import{c as v,p as N,t as T,h as U}from"../../../mat4-Lq7FX_53.js";import"../../../wgslKeywords-TYZDccpG.js";import"../../../common-C8IKy_GC.js";const k=V("aVertexPosition",O()),J=V("aVertexColor",l()),K=P("uModelViewMatrix",C()),Q=P("uProjectionMatrix",C()),L=_("vColor",l()),h=A("main",()=>{const o=B("position",l(k,0,1));I.assign(Q.multiply(K).multiply(o)),L.assign(J)}),f=R("main",()=>{D(L)});let b=0;document.addEventListener("DOMContentLoaded",async()=>{const o=h.toGLSL(),i=f.toGLSL(),n=h.toWGSL(),s=f.toWGSL(),r=window.devicePixelRatio||1,e=document.getElementById("webgpu");e.width=e.clientWidth*r,e.height=e.clientHeight*r;const a=await new H({canvasId:"webgpu"}).init(),t=document.getElementById("webgl");t.width=t.clientWidth*r,t.height=t.clientHeight*r;const d=new E({canvasId:"webgl",webGLcontextId:"webgl2"}),{projectionMatrix:W,modelViewMatrix:j}=M(e,0),m={pipeline:{vertex:{glsl:o,wgsl:n},fragment:{glsl:i,wgsl:s},depthStencil:{depthCompare:"less-equal"},primitive:{topology:"triangle-strip"}},vertices:{aVertexPosition:{format:"float32x2",data:new Float32Array([1,1,-1,1,1,-1,-1,-1])},aVertexColor:{format:"float32x4",data:new Float32Array([1,1,1,1,1,0,0,1,0,1,0,1,0,0,1,1])}},draw:{__type__:"DrawVertex",firstVertex:0,vertexCount:4},bindingResources:{uProjectionMatrix:{value:W},uModelViewMatrix:{value:j}}},y={descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}],depthStencilAttachment:{depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}},renderPassObjects:[m]};let p=0,u=0;function g(c){c*=.001;const S=c-p;p=c;const{projectionMatrix:G,modelViewMatrix:F}=M(e,S),x=q(m.bindingResources);x.uProjectionMatrix={value:G},x.uModelViewMatrix={value:F};const w={commandEncoders:[{passEncoders:[y]}]};a.submit(w),d.submit(w),u===0&&(u++,z(d,a,t,e,0)),requestAnimationFrame(g)}requestAnimationFrame(g)});function M(o,i){const n=45*Math.PI/180,s=o.clientWidth/o.clientHeight,r=.1,e=100,a=v();N(a,n,s,r,e);const t=v();return T(t,t,[-0,0,-6]),b+=i,U(t,t,b,[0,0,1]),{projectionMatrix:a,modelViewMatrix:t}}
