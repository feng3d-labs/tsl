import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{a as C,d as G,c as g,u as P,e as S,b as I,g as _,f as O,W as R,r as b}from"../../../builtins-C5GxhwDd.js";import{W as E,a as q}from"../../../frame-comparison-CBkPASci.js";import{v as B}from"../../../var-BrV_KNjZ.js";import{r as H}from"../../../return-DhHkPme9.js";import{m as y}from"../../../mat4-Pkjqt0vg.js";import{c as M,p as z,t as D,h as u}from"../../../mat4-Lq7FX_53.js";import"../../../wgslKeywords-TYZDccpG.js";import"../../../common-C8IKy_GC.js";const U=C("aVertexPosition",G()),N=C("aVertexColor",g()),T=P("uModelViewMatrix",y()),k=P("uProjectionMatrix",y()),L=S("vColor",g()),p=I("main",()=>{const i=B("position",g(U,1));_.assign(k.multiply(T).multiply(i)),L.assign(N)}),V=O("main",()=>{H(L)});let c=0;document.addEventListener("DOMContentLoaded",async()=>{const i=p.toGLSL(),r=V.toGLSL(),n=p.toWGSL(),a=V.toWGSL(p),o=window.devicePixelRatio||1,e=document.getElementById("webgpu");e.width=e.clientWidth*o,e.height=e.clientHeight*o;const s=await new E({canvasId:"webgpu"}).init(),t=document.getElementById("webgl");t.width=t.clientWidth*o,t.height=t.clientHeight*o;const w=new R({canvasId:"webgl",webGLcontextId:"webgl2"}),l=J(),d={pipeline:{vertex:{glsl:i,wgsl:n},fragment:{glsl:r,wgsl:a},primitive:{topology:"triangle-list"},depthStencil:{depthCompare:"less-equal"}},vertices:{aVertexPosition:{format:"float32x3",data:l.position},aVertexColor:{format:"float32x4",data:l.color}},indices:l.indices,draw:{__type__:"DrawIndexed",firstIndex:0,indexCount:36},bindingResources:{uProjectionMatrix:{value:new Float32Array(16)},uModelViewMatrix:{value:new Float32Array(16)}}},W={descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}],depthStencilAttachment:{depthClearValue:1,depthLoadOp:"clear"}},renderPassObjects:[d]};let f=0,x=0;function v(m){m*=.001;const j=m-f;f=m;const{projectionMatrix:A,modelViewMatrix:F}=K(e,j);b(d.bindingResources).uProjectionMatrix={value:A},b(d.bindingResources).uModelViewMatrix={value:F};const h={commandEncoders:[{passEncoders:[W]}]};s.submit(h),w.submit(h),x===0&&(x++,q(w,s,t,e,0)),requestAnimationFrame(v)}requestAnimationFrame(v)});function J(){const i=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],r=[[1,1,1,1],[1,0,0,1],[0,1,0,1],[0,0,1,1],[1,1,0,1],[1,0,1,1]];let n=[];for(let o=0;o<r.length;++o){const e=r[o];n=n.concat(e,e,e,e)}const a=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];return{position:new Float32Array(i),color:new Float32Array(n),indices:new Uint16Array(a)}}function K(i,r){const n=45*Math.PI/180,a=i.clientWidth/i.clientHeight,o=.1,e=100,s=M();z(s,n,a,o,e);const t=M();return D(t,t,[-0,0,-6]),c+=r,u(t,t,c,[0,0,1]),u(t,t,c*.7,[0,1,0]),u(t,t,c*.3,[1,0,0]),{projectionMatrix:s,modelViewMatrix:t}}
