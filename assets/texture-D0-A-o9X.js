import{t as d,U as g,w as c,V as m,C as T,F as v,_ as a,$ as p,a0 as b,a1 as w}from"./builtins-C5GxhwDd.js";class G extends c{constructor(){super()}setDepthWgslExpr(t){this._depthWgslExpr=t}get r(){const t=new v;return t.toGLSL=()=>`${this.toGLSL()}.r`,t.toWGSL=this._depthWgslExpr,t.dependencies=[this],t}}function U(e,t,s){if(e instanceof T&&t instanceof d&&s===void 0){const n=new g;return n.toGLSL=()=>`texture(${e.uniform.name}, ${t.toGLSL()})`,n.toWGSL=()=>{const o=`${e.uniform.name}_texture`;return`textureLoad(${o}, vec2<i32>(${t.toWGSL()} * vec2<f32>(textureDimensions(${o}))), 0)`},n.dependencies=[e,t],n}const W=e instanceof p,_=e instanceof b,L=e.isDepthTexture(),h=s instanceof w,D=s instanceof v||typeof s=="number",r=h?s:void 0,i=D?s:void 0,x=i!==void 0?typeof i=="number"?i.toFixed(1):i.toGLSL():void 0,$=i!==void 0?typeof i=="number"?i.toFixed(1):i.toWGSL():void 0,u=L?new G:new c;u.toGLSL=()=>{const n=a(),f=((n==null?void 0:n.version)??1)===2||W||_?"texture":"texture2D";return r!==void 0?`${f}(${e.uniform.name}, vec3(${t.toGLSL()}, float(${r.toGLSL()})))`:t instanceof m?`${f}(${e.uniform.name}, ${t.toGLSL()})`:x!==void 0?`${f}(${e.uniform.name}, ${t.toGLSL()}, ${x})`:`${f}(${e.uniform.name}, ${t.toGLSL()})`};const S=()=>{const n=`${e.uniform.name}_texture`;return`textureLoad(${n}, vec2<i32>(${t.toWGSL()} * vec2<f32>(textureDimensions(${n}))), 0)`};return u instanceof G&&u.setDepthWgslExpr(S),u.toWGSL=()=>{const n=a(),o=(n==null?void 0:n.stage)==="vertex";return L?S():r!==void 0?o?`textureSampleLevel(${e.uniform.name}_texture, ${e.uniform.name}, ${t.toWGSL()}, ${r.toWGSL()}, 0.0)`:`textureSample(${e.uniform.name}_texture, ${e.uniform.name}, ${t.toWGSL()}, ${r.toWGSL()})`:t instanceof m?o?`textureSampleLevel(${e.uniform.name}_texture, ${e.uniform.name}, ${t.toWGSL()}, 0.0)`:`textureSample(${e.uniform.name}_texture, ${e.uniform.name}, ${t.toWGSL()})`:$!==void 0?o?`textureSampleLevel(${e.uniform.name}_texture, ${e.uniform.name}, ${t.toWGSL()}, ${$})`:`textureSampleBias(${e.uniform.name}_texture, ${e.uniform.name}, ${t.toWGSL()}, ${$})`:o?`textureSampleLevel(${e.uniform.name}_texture, ${e.uniform.name}, ${t.toWGSL()}, 0.0)`:`textureSample(${e.uniform.name}_texture, ${e.uniform.name}, ${t.toWGSL()})`},r!==void 0?u.dependencies=[e,t,r]:i!==void 0&&typeof i!="number"?u.dependencies=[e,t,i]:u.dependencies=[e,t],u}export{U as t};
